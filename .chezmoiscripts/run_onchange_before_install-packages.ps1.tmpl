{{ if eq .chezmoi.os "windows" -}}
Write-Host "ðŸ”¹ Starting Windows Provisioning" -ForegroundColor Cyan

# 1. Install Scoop if missing
if (!(Get-Command scoop -ErrorAction SilentlyContinue)) {
    Invoke-RestMethod -Uri get.scoop.sh | Invoke-Expression
}

# 2. Add essential buckets
scoop bucket add extras
scoop bucket add main

# 3. List of your requested tools
$apps = @(
    "fish", "nushell", "ripgrep", "fd", "bat", "eza", "zoxide", "xh", 
    "zellij", "gitui", "dust", "dua", "starship", "yazi", "hyperfine", 
    "helix", "bacon", "fselect", "ncspot", "delta", "ripgrep-all", 
    "tokei", "wiki-tui", "just", "mask", "mprocs", "presenterm", 
    "kondo", "bob", "mise", "espanso"
)

foreach ($app in $apps) {
    if (!(scoop list | Select-String $app)) {
        Write-Host "Installing $app..." -ForegroundColor Yellow
        scoop install $app
    }
}

Write-Host "âœ… Windows Provisioning Complete!" -ForegroundColor Green
{{ end -}}
